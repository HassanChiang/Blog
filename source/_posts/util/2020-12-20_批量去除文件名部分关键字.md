---

title: 使用JS脚本批量去除文件名中部分关键字
date: 2020-12-20
description:
{: id="20201220214147-wftmu8h"}

tags:
{: id="20201220214147-bndlad9"}

- {: id="20201220214147-16ykkgk"}文件名批量修改
{: id="20201220214147-znond9x"}

nav:
{: id="20201220214147-g02dldr"}

- {: id="20201220214147-mcwbfsv"}工具
{: id="20201220214147-90j0i1u"}

categories:
{: id="20201220214147-eb96az4"}

- {: id="20201220214147-mgwm2tx"}资源导航
{: id="20201220214147-gfjfhq0"}

---

```javascript

var fs = require('fs');
 
var KEY_WORD = '要去掉的关键字';
var PATH = '/home/指定目录/';
 
//遍历目录得到文件信息
function run(path, callback) {
    var files = fs.readdirSync(path);
 
    files.forEach(function(file){
        f = path + '/' + file;
        if (fs.statSync(f).isFile()) {
            callback(path, file);
        } else {
            //目录递归处理
            run(f, callRename);
        }
    });
}
 
// 修改文件名称
function rename(oldPath, newPath) {
    fs.rename(oldPath, newPath, function(err) {
        if (err) {
            throw err;
        }
    });
}

function callRename(path, fileName) {
    let oldPath = path + '/' + fileName; // 源文件路径
    let newPath = path + '/' + fileName.replace(KEY_WORD, ''); // 新文件全路径
    console.log(newPath);
    rename(oldPath, newPath);
}

// 运行入口
run(PATH, callRename);

```
{: id="20201220214147-l7nl9ws"}


{: id="20201220214147-8jpjmjm" type="doc"}
